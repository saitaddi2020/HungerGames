<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Admin Login</title>
    <style>
    /* ========================================
      MODERN DYNAMIC STYLING - LIGHT & SOFT UI THEME
      (Consistent with other auth pages)
      ========================================
    */

    /* --- 1. CSS Variables for New Theme --- */
    :root {
        --primary-color: #FF6347; /* Tomato Coral */
        --primary-light: #FF7F50;
        --error-color: #d93025;
        --background-color: #e0e5ec;
        --surface-color: #e0e5ec;
        --text-primary: #334155;
        --text-secondary: #64748B;

        --border-radius: 12px;
        --shadow-light: -8px -8px 16px #ffffff;
        --shadow-dark: 8px 8px 16px #a3b1c6;
        --shadow-inset: inset 4px 4px 8px #a3b1c6, inset -4px -4px 8px #ffffff;
        --transition-speed: 0.3s;
    }

    /* --- 2. Base & Body Styles --- */
    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background-color: var(--background-color);
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }

    /* --- 3. Soft UI (Neumorphism) Container --- */
    .login-container {
        background: var(--surface-color);
        padding: 40px;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-light), var(--shadow-dark);
        width: 100%;
        max-width: 380px;
        box-sizing: border-box;
        text-align: center;
    }

    h2 { 
        margin: 0 0 25px; 
        color: var(--text-primary); 
        font-size: 24px; 
    }

    /* --- 4. Input Fields (Inset Style) --- */
    .input-group { 
        margin-bottom: 20px; 
    }

    input {
        width: 100%; 
        padding: 14px; 
        border: none;
        border-radius: var(--border-radius); 
        font-size: 16px; 
        box-sizing: border-box; 
        transition: all var(--transition-speed) ease;
        background: var(--surface-color);
        color: var(--text-primary);
        box-shadow: var(--shadow-inset);
    }

    input:focus { 
        outline: none; 
        box-shadow: var(--shadow-inset), 0 0 0 2px var(--primary-color);
    }

    /* --- 5. Reusable Button Styles --- */
    button {
        width: 100%; 
        padding: 14px; 
        background-color: var(--primary-color); 
        color: white;
        border: none; 
        border-radius: var(--border-radius); 
        font-size: 16px; 
        font-weight: 600;
        cursor: pointer; 
        transition: all var(--transition-speed) ease;
        box-shadow: var(--shadow-light), var(--shadow-dark);
    }

    button:hover:not(:disabled) { 
        background-color: var(--primary-light);
        transform: translateY(-2px);
    }

    button:active:not(:disabled) {
        box-shadow: var(--shadow-inset);
        transform: translateY(1px);
    }

    button:disabled { 
        opacity: 0.7; 
        cursor: not-allowed; 
        box-shadow: none;
    }

    .error { 
        color: var(--error-color); 
        margin-top: 15px; 
        min-height: 20px; 
        font-weight: 500; 
    }
    
    /* --- 6. Animated Underline Link --- */
    .footer-link {
        margin-top: 25px;
        text-align: center;
    }
    .footer-link a {
        color: var(--text-primary);
        text-decoration: none;
        font-weight: 500;
        font-size: 14px;
        transition: color var(--transition-speed) ease;
        position: relative;
        padding-bottom: 4px;
    }
    .footer-link a:hover {
        color: var(--primary-color);
    }
    .footer-link a::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 2px;
        bottom: 0;
        left: 0;
        background: var(--primary-color);
        transform: scaleX(0);
        transform-origin: bottom right;
        transition: transform var(--transition-speed) ease-out;
    }
    .footer-link a:hover::after {
        transform: scaleX(1);
        transform-origin: bottom left;
    }
</style>
</head>
<body>

<div class="login-container">
    <form id="loginForm">
        <h2>Super Admin Login</h2>
        <div class="input-group">
            <input type="email" id="email" placeholder="Email" required />
        </div>
        <div class="input-group">
            <input type="password" id="password" placeholder="Password" required />
        </div>
        <button type="submit" id="loginButton">Login</button>
        <p class="error" id="errorMsg"></p>
    </form>
    
    <!-- âœ¨ FIX: Added the redirect link here -->
    <div class="footer-link">
        <a href="index.html">Return to User & Caterer Login</a>
    </div>
</div>

<script type="module">
    // 1. Import your central 'auth' object from your local file.
    import { auth } from './firebase.js'; 
    
    // 2. THE FIX: Add this line back to import the necessary Auth functions.
    import { signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

    // (Ensure all old initialization code like 'initializeApp', 'firebaseConfig', 
    // and 'getAuth' has been deleted from this file).


    // The rest of your login code remains the same and is correct.
    const loginForm = document.getElementById('loginForm');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const loginButton = document.getElementById('loginButton');
    const errorMsg = document.getElementById('errorMsg');

    const SUPER_ADMIN_EMAIL = "saitaddi1432@gmail.com";

    loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        login();
    });

    async function login() {
        const email = emailInput.value.trim();
        const password = passwordInput.value.trim();

        errorMsg.innerText = "";
        loginButton.disabled = true;
        loginButton.innerText = "Logging in...";

        try {
            // This will now work because signInWithEmailAndPassword is properly imported.
            const userCredential = await signInWithEmailAndPassword(auth, email, password);
            
            if (userCredential.user.email === SUPER_ADMIN_EMAIL) {
                window.location.href = "super_admin.html";
            } else {
                await signOut(auth);
                errorMsg.innerText = "Access Denied. Only the Super Admin can log in.";
            }

        } catch (error) {
            switch (error.code) {
                case 'auth/user-not-found':
                case 'auth/wrong-password':
                case 'auth/invalid-credential':
                    errorMsg.innerText = "Invalid email or password.";
                    break;
                case 'auth/invalid-email':
                    errorMsg.innerText = "Please enter a valid email address.";
                    break;
                default:
                    errorMsg.innerText = "An unexpected error occurred.";
                    console.error("Login Error:", error);
            }
        } finally {
            loginButton.disabled = false;
            loginButton.innerText = "Login";
        }
    }
</script>

</body>
</html>
